<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
<title>Sample Scripts
     | Uyuni API Documentation</title>    <link rel="canonical" href="https://www.uyuni-project.org/uyuni-docs-api/uyuni/api/scripts.html">
    <link rel="prev" href="schedule.html">
    <link rel="next" href="subscriptionmatching.pinnedsubscription.html">
    <meta name="generator" content="Antora 3.1.10">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="stylesheet" href="../../_/css/search.css">
<link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
<link rel="stylesheet" href="../../_/css/font-styles.css">
<link rel="stylesheet" href="../../_/fonts/css/all.css">
<link rel="stylesheet" href="../../_/css/site-extra.css">
<!-- <link rel="preconnect" href="https://fonts.gstatic.com"> -->
<link href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" rel="stylesheet">
<!-- <link href="https://fonts.googleapis.com/css?family=Montserrat|Roboto&display=swap" rel="stylesheet"> -->
<link rel="stylesheet" href="../../_/css/vendor/light.css">
<link rel="stylesheet" href="../../_/css/vendor/tabs.css">
<script src="/docserv/res/lightheaded/analytics.js"
        type="text/javascript"></script>
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
   <div class="navbar-brand">
            <div class="navbar-item">
                <a class=" navbar-logo" href="https://www.uyuni-project.org/"><img
                        class="logo" src="../../_/img/uyuni_logo.png"/></a>
            </div>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
     <div id="topbar-nav" class="navbar-menu">
          <div class="navbar-end">
              <div class="navbar-item has-dropdown is-hoverable">
                  <div class="navbar-link"><img src="../../_/img/resources.png" class="langIcon Resurces" alt="Resources" title="Resources"></div>
                  <div class="navbar-dropdown">
                      <!--  <div class="navbar-item"><strong>Resources</strong></div> -->
                      <a class="navbar-item" href="https://github.com/uyuni-project/uyuni-docs"><i
                              class="fab fa-github"></i>&nbsp;uyuni-docs</a>
                      <a class="navbar-item" href="https://github.com/uyuni-project/uyuni-docs/issues"><i
                              class="fab fa-github"></i>&nbsp;Report Issue</a>
                      <a class="navbar-item"
                         href="https://github.com/uyuni-project/uyuni-docs/wiki"><i
                              class="fas fa-user-edit"></i>&nbsp;Contribute</a>
                  </div>
              </div>
                           <div class="navbar-item has-dropdown is-hoverable">
                 <div class="navbar-link"><img src="../../_/img/language.png" class="langIcon Language" alt="Language" title="Language"></div>
                 <div class="navbar-dropdown">
                     <!--  </div><div>Icons made by <a href="https://www.flaticon.com/authors/freepik" title="Freepik">Freepik</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></div> -->
                     <a role="button" class="navbar-item" id="en" onclick="selectLanguage(this.id)"><img src="../../_/img/engFlag.svg" class="langIcon english">&nbsp;English</a>
                     <!-- LANGUAGESELECTOR -->
                 </div>
             </div>
                <div></div>
          </div>
      </div>
      <a href="https://twitter.com/uyuniproject?lang=en">
      <img class="x-logo" src="../../_/img/x-logo-white.png">
      </a>
      
   <!--   <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">

        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
        <div class="navbar-item">
          <span class="control">
          </span>
        </div>
      </div> -->
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="uyuni" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Uyuni API</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../common_gfdl1.2_i.html">License</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="faqs.html">FAQ</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="access.html">access</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="actionchain.html">actionchain</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="activationkey.html">activationkey</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="admin.configuration.html">admin.configuration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="admin.monitoring.html">admin.monitoring</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="admin.payg.html">admin.payg</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="ansible.html">ansible</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="api.html">api</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="audit.html">audit</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="auth.html">auth</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="channel.access.html">channel.access</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="channel.html">channel</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="channel.appstreams.html">channel.appstreams</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="channel.org.html">channel.org</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="channel.software.html">channel.software</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="configchannel.html">configchannel</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="contentmanagement.html">contentmanagement</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="distchannel.html">distchannel</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="errata.html">errata</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="formula.html">formula</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="image.html">image</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="image.delta.html">image.delta</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="image.profile.html">image.profile</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="image.store.html">image.store</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="kickstart.html">kickstart</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="kickstart.filepreservation.html">kickstart.filepreservation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="kickstart.keys.html">kickstart.keys</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="kickstart.profile.html">kickstart.profile</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="kickstart.profile.keys.html">kickstart.profile.keys</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="kickstart.profile.software.html">kickstart.profile.software</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="kickstart.profile.system.html">kickstart.profile.system</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="kickstart.snippet.html">kickstart.snippet</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="kickstart.tree.html">kickstart.tree</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="maintenance.html">maintenance</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="org.html">org</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="org.trusts.html">org.trusts</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="packages.html">packages</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="packages.provider.html">packages.provider</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="packages.search.html">packages.search</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="preferences.locale.html">preferences.locale</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="proxy.html">proxy</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="recurring.html">recurring</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="recurring.custom.html">recurring.custom</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="recurring.highstate.html">recurring.highstate</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="recurring.playbook.html">recurring.playbook</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="saltkey.html">saltkey</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="schedule.html">schedule</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="scripts.html">scripts</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="subscriptionmatching.pinnedsubscription.html">subscriptionmatching.pinnedsubscription</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="sync.content.html">sync.content</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="sync.hub.html">sync.hub</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="system.html">system</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="system.appstreams.html">system.appstreams</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="system.config.html">system.config</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="system.custominfo.html">system.custominfo</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="system.monitoring.html">system.monitoring</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="system.provisioning.powermanagement.html">system.provisioning.powermanagement</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="system.provisioning.snapshot.html">system.provisioning.snapshot</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="system.scap.html">system.scap</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="system.search.html">system.search</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="systemgroup.html">systemgroup</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="user.html">user</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="user.external.html">user.external</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="user.notifications.html">user.notifications</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="virtualhostmanager.html">virtualhostmanager</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Uyuni API</span>
    <span class="version">default</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Uyuni API</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">default</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Uyuni API</a></li>
    <li><a href="scripts.html">scripts</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/uyuni-project/uyuni-docs-api/edit/master/modules/api/pages/scripts.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="On this page" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Sample Scripts</h1>
<div class="sect1">
<h2 id="_json_over_http_api_scripts"><a class="anchor" href="#_json_over_http_api_scripts"></a><a class="link" href="#_json_over_http_api_scripts">JSON over HTTP API scripts</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_http_login_with_curl"><a class="anchor" href="#_http_login_with_curl"></a><a class="link" href="#_http_login_with_curl">HTTP login with Curl</a></h3>
<div class="paragraph">
<p>Below is an example of the login process using an authentication token with the JSON over HTTP API.</p>
</div>
<div class="paragraph">
<p>The JSON over HTTP API uses authentication tokens for access. The token is sent in a
cookie called <code>pxt-session-cookie</code> in a response to a call to the <code>auth.login</code> endpoint.
The <code>auth.login</code> endpoint accepts a POST request with a JSON body that has <code>login</code> and
<code>password</code> properties in a top-level object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ API=https://manager.example.com/rhn/manager/api
$ curl -H "Content-Type: application/json" -d '{"login": "myusername", "password": "mypass"}' -i $API/auth/login

HTTP/1.1 200 200
...
Set-Cookie: pxt-session-cookie=&amp;lt;tokenhash&amp;gt;; ...
...
{"success":true,"messages":[]}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the login is successful, the retrieved cookie must be added to each subsequent request for authenticated access.</p>
</div>
</div>
<div class="sect2">
<h3 id="_http_get_example"><a class="anchor" href="#_http_get_example"></a><a class="link" href="#_http_get_example">HTTP GET example</a></h3>
<div class="paragraph">
<p>Below is an example of an HTTP GET call to the <code>contentmanagement.lookupProject</code> API.
In a GET request, method parameters must be sent as query string key-value pairs.</p>
</div>
<div class="paragraph">
<p><em>The JSON output is pretty-printed for clarity.</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ API=https://manager.example.com/rhn/manager/api
$ curl -H "Content-Type: application/json" --cookie "pxt-session-cookie&amp;lt;tokenhash&amp;gt;;" \
&gt; $API/contentmanagement/lookupProject?projectLabel=myproject
{
  "success": true,
  "result": {
    "name": "My Project",
    "description": "My CLM project",
    "id": 1,
    "label": "myproject",
    "orgId": 1
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_http_post_example"><a class="anchor" href="#_http_post_example"></a><a class="link" href="#_http_post_example">HTTP POST example</a></h3>
<div class="paragraph">
<p>Below is an example of an HTTP POST call to the <code>contentmanagement.createProject</code> API.
In a POST request, method parameters can be sent as query string key-value pairs, as a JSON object in the request body, or a mix of both. <code>object</code> type parameters cannot be represented as a query string element and therefore must be sent in the request body.
The following examples show both approaches.</p>
</div>
<div class="paragraph">
<p><em>The JSON output is pretty-printed for clarity.</em></p>
</div>
<div class="sect3">
<h4 id="_using_the_query_string"><a class="anchor" href="#_using_the_query_string"></a><a class="link" href="#_using_the_query_string">Using the query string</a></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ API=https://manager.example.com/rhn/manager/api
$ curl -H "Content-Type: application/json" --cookie "pxt-session-cookie&amp;lt;tokenhash&amp;gt;;" -X POST \
&gt; "$API/contentmanagement/createProject?projectLabel=myproject&amp;name=My%20Project&amp;description="
{
  "success": true,
  "result": {
    "name": "My Project",
    "id": 1,
    "label": "myproject",
    "orgId": 1
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_the_request_body"><a class="anchor" href="#_using_the_request_body"></a><a class="link" href="#_using_the_request_body">Using the request body</a></h4>
<div class="paragraph">
<p>The request body must be a top-level JSON object that contains all the parameters as its properties.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ API=https://manager.example.com/rhn/manager/api
$ curl -H "Content-Type: application/json" --cookie "pxt-session-cookie&amp;lt;tokenhash&amp;gt;;" \
&gt; -d '{"projectLabel":"myproject","name":"My Project","description":""}' \
&gt; $API/contentmanagement/createProject
{
  "success": true,
  "result": {
    "name": "My Project",
    "id": 1,
    "label": "myproject",
    "orgId": 1
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>===Python 3 example</p>
</div>
<div class="paragraph">
<p>Below is an example of the <code>system.listActiveSystems</code> call being used.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">#!/usr/bin/env python3
import requests
import pprint

MANAGER_URL = "https://manager.example.com/rhn/manager/api"
MANAGER_LOGIN = "username"
MANAGER_PASSWORD = "password"
SSLVERIFY = "/path/to/CA" # or False to disable verify;

data = {"login": MANAGER_LOGIN, "password": MANAGER_PASSWORD}
response = requests.post(MANAGER_URL + '/auth/login', json=data, verify=SSLVERIFY)
print("LOGIN: {}:{}".format(response.status_code, response.json()))

cookies = response.cookies
res2 = requests.get(MANAGER_URL + '/system/listActiveSystems', cookies=cookies, verify=SSLVERIFY)
print("RETCODE: {}".format(res2.status_code))
pprint.pprint(res2.json())

sysinfo = res2.json()['result'][0]

note = {"sid": sysinfo['id'], "subject": "Title", "body": "Content of the Note"}
res2 = requests.post(MANAGER_URL + '/system/addNote', json=note, cookies=cookies, verify=SSLVERIFY)
print("RETCODE: {}".format(res2.status_code))
pprint.pprint(res2.json())

res2 = requests.get(MANAGER_URL + '/system/listNotes?sid={}'.format(sysinfo['id']), cookies=cookies, verify=SSLVERIFY)
print("RETCODE: {}".format(res2.status_code))
pprint.pprint(res2.json())

res2 = requests.post(MANAGER_URL + '/auth/logout', cookies=cookies, verify=SSLVERIFY)
print("RETCODE: {}".format(res2.status_code))
pprint.pprint(res2.json())</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_xmlrpc_scripts"><a class="anchor" href="#_xmlrpc_scripts"></a><a class="link" href="#_xmlrpc_scripts">XMLRPC Scripts</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_perl_example"><a class="anchor" href="#_perl_example"></a><a class="link" href="#_perl_example">Perl Example</a></h3>
<div class="paragraph">
<p>This Perl example shows the <code>system.listUserSystems</code> call being used to get a
list of systems a user has access to. In the example below, the name of each system will be printed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-perl hljs" data-lang="perl">#!/usr/bin/perl
use Frontier::Client;

my $HOST = 'manager.example.com';
my $user = 'username';
my $pass = 'password';

my $client = new Frontier::Client(url =&gt; "http://$HOST/rpc/api");
my $session = $client-&gt;call('auth.login',$user, $pass);

my $systems = $client-&gt;call('system.listUserSystems', $session);
foreach my $system (@$systems) {
  print $system-&gt;{'name'}."\n";
}
$client-&gt;call('auth.logout', $session);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_python_2_example"><a class="anchor" href="#_python_2_example"></a><a class="link" href="#_python_2_example">Python 2 Example</a></h3>
<div class="paragraph">
<p>Below is an example of the <code>user.listUsers</code> call being used. Only the login of each
user is printed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">#!/usr/bin/python
import xmlrpclib

MANAGER_URL = "http://manager.example.com/rpc/api"
MANAGER_LOGIN = "username"
MANAGER_PASSWORD = "password"

client = xmlrpclib.Server(MANAGER_URL, verbose=0)

key = client.auth.login(MANAGER_LOGIN, MANAGER_PASSWORD)
list = client.user.list_users(key)
for user in list:
  print user.get('login')

client.auth.logout(key)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following code shows how to use date-time parameters. This code will schedule immediate installation of package rhnlib-2.5.22.9.el6.noarch to system with id 1000000001.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">#!/usr/bin/python
from datetime import datetime
import time
import xmlrpclib

MANAGER_URL = "http://manager.example.com/rpc/api"
MANAGER_LOGIN = "username"
MANAGER_PASSWORD = "password"

client = xmlrpclib.Server(MANAGER_URL, verbose=0)

key = client.auth.login(MANAGER_LOGIN, MANAGER_PASSWORD)
package_list = client.packages.findByNvrea(key, 'rhnlib', '2.5.22', '9.el6', '', 'noarch')
today = datetime.today()
earliest_occurrence = xmlrpclib.DateTime(today)
client.system.schedulePackageInstall(key, 1000000001, package_list[0]['id'], earliest_occurrence)

client.auth.logout(key)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_python_3_with_ssl_example"><a class="anchor" href="#_python_3_with_ssl_example"></a><a class="link" href="#_python_3_with_ssl_example">Python 3 with SSL Example</a></h3>
<div class="paragraph">
<p>Below is an example of the <code>user.listUsers</code> call being called.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">#!/usr/bin/env python3
from xmlrpc.client import ServerProxy
import ssl

MANAGER_URL = "https://manager.example.com/rpc/api"
MANAGER_LOGIN = "username"
MANAGER_PASSWORD = "password"

# You might need to set to set other options depending on your
# server SSL configuartion and your local SSL configuration
context = ssl.create_default_context()
client = ServerProxy(MANAGER_URL, context=context)
key = client.auth.login(MANAGER_LOGIN, MANAGER_PASSWORD)

print(client.user.list_users(key))

client.auth.logout(key)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_python_3_example"><a class="anchor" href="#_python_3_example"></a><a class="link" href="#_python_3_example">Python 3 Example</a></h3>
<div class="paragraph">
<p>Below is an example of the <code>user.listUsers</code> call being called.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">#!/usr/bin/env python3
from xmlrpc.client import ServerProxy

MANAGER_URL = "http://manager.example.com/rpc/api"
MANAGER_LOGIN = "username"
MANAGER_PASSWORD = "password"

client = ServerProxy(MANAGER_URL)
key = client.auth.login(MANAGER_LOGIN, MANAGER_PASSWORD)

print(client.user.list_users(key))

client.auth.logout(key)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following code shows how to use date-time parameters. This code will schedule immediate installation of package rhnlib-2.5.22.9.el6.noarch to system with id 1000000001.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-python hljs" data-lang="python">#!/usr/bin/env python3
from datetime import datetime
from xmlrpc.client import ServerProxy

MANAGER_URL = "http://manager.example.com/rpc/api"
MANAGER_LOGIN = "username"
MANAGER_PASSWORD = "password"

client = ServerProxy(MANAGER_URL)

key = client.auth.login(MANAGER_LOGIN, MANAGER_PASSWORD)
package_list = client.packages.findByNvrea(key, 'rhnlib', '2.5.22', '9.el6', '', 'noarch')
earliest_occurrence = datetime.today()
client.system.schedulePackageInstall(key, 1000000001, [package_list[0]['id']], earliest_occurrence)

client.auth.logout(key)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ruby_example"><a class="anchor" href="#_ruby_example"></a><a class="link" href="#_ruby_example">Ruby Example</a></h3>
<div class="paragraph">
<p>Below is an example of the <code>channel.listAllChannels</code> API call. List of channel labels is printed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ruby hljs" data-lang="ruby">#!/usr/bin/ruby
require "xmlrpc/client"

@MANAGER_URL = "http://manager.example.com/rpc/api"
@MANAGER_LOGIN = "username"
@MANAGER_PASSWORD = "password"

@client = XMLRPC::Client.new2(@MANAGER_URL)

@key = @client.call('auth.login', @MANAGER_LOGIN, @MANAGER_PASSWORD)
channels = @client.call('channel.listAllChannels', @key)
for channel in channels do
  p channel["label"]
end

@client.call('auth.logout', @key)</code></pre>
</div>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="schedule.html">schedule</a></span>
  <span class="next"><a href="subscriptionmatching.pinnedsubscription.html">subscriptionmatching.pinnedsubscription</a></span>
</nav>
</article>
  </div>
</main>
</div>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script async src="../../_/js/vendor/tabs.js"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css"></script>
<script async src="../../search-index.js"></script>
<script src="../../_/js/vendor/langSelection.js"></script>

  </body>
</html>
